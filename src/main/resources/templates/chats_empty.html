<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ß–∞—Ç</title>
</head>
<body>
<!-- –û—Å–Ω–æ–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ -->
<table width="100%" cellpadding="0" cellspacing="0">
    <tr>
        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç (—Å–¥–≤–∏–Ω—É—Ç –≤–ø—Ä–∞–≤–æ) -->
        <td width="80%" valign="top">
            <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–µ–∫—É—â–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ -->
            <div sec:authorize="isAuthenticated()" style="float: right; color: #666;">
                –í—ã –≤–æ—à–ª–∏ –∫–∞–∫: <strong sec:authentication="name"></strong>
                <br>
                <a th:href="@{/logout}">–í—ã–π—Ç–∏</a>
            </div>

            <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
            <h1>–ë—Ä–æ, –≤—ã–±–µ—Ä–∏ —á–∞—Ç, —ë–∫–∞—Ä–Ω—ã–π –±–∞–±–∞–π!</h1>

        </td>

        <!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å —Å —á–∞—Ç–∞–º–∏ (—Å–ø—Ä–∞–≤–∞) -->
        <td width="20%" valign="top" style="padding-left: 20px; border-left: 1px solid #ccc;">
            <!-- –°–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö —á–∞—Ç–æ–≤ -->
            <div th:if="${activeChats != null and !activeChats.isEmpty()}">
                <h3>–ê–∫—Ç–∏–≤–Ω—ã–µ —á–∞—Ç—ã:</h3>
                <ul style="list-style-type: none; padding: 0; margin: 0;">
                    <li th:each="chat : ${activeChats}" style="margin-bottom: 10px;">
                        <!-- –û–ø—Ä–µ–¥–µ–ª—è–µ–º ID —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞ (–æ–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –Ω–∞–∑–≤–∞–Ω–∏—è –ø–æ–ª–µ–π - user1id/user2id) -->
                        <div th:with="interlocutorId=${currentUserId == chat.user1id ? chat.user2id : chat.user1id}">
                            <a th:href="@{/chats/{chatId}(chatId=${chat.id})}"
                               style="text-decoration: none; color: #0066cc; display: block; padding: 5px;">
                                üë§ –ß–∞—Ç —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º ID: <span th:text="${interlocutorId}"></span>
                                <br><small>–ß–∞—Ç ID: <span th:text="${chat.id}"></span></small>
                            </a>
                        </div>
                    </li>
                </ul>
            </div>

            <!-- –ï—Å–ª–∏ –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö —á–∞—Ç–æ–≤ -->
            <div th:if="${activeChats == null or activeChats.isEmpty()}">
                <p><small>–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö —á–∞—Ç–æ–≤</small></p>
            </div>
        </td>
    </tr>
</table>
</body>
</html>